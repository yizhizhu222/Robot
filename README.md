# Vision-Rover: 基于 YOLOv8 的端侧视觉追踪机器人

### 免责声明 (Disclaimer)
本项目为个人学习与极客折腾产物，核心目的是验证 YOLOv8 在 Orange Pi 端侧的部署可行性，以及 STM32 的底盘闭环控制逻辑。
代码及硬件方案按“原样 (As-Is)”开源提供。
由于嵌入式环境、硬件批次差异以及 Linux 权限的复杂性，
本人不保证代码在任何第三方硬件上均能开箱即用，亦不提供环境配置的免费技术支持。
遇到报错的同学请自行发挥极客精神，善用搜索引擎与 AI 排查问题（提示：多留意串口权限与绝对路径）。
祝折腾愉快！

> **“看见目标，精准出击”** > 本项目是一个端到端的视觉追踪智能车解决方案。采用“上位机视觉+下位机控制”的标准机器人架构，结合轻量化 NCNN 框架与 FreeRTOS 实时系统，实现高帧率的目标检测与丝滑的差速底盘追踪。

## 项目亮点
* **灵活定制**：支持在 Windows 端自定义训练 YOLOv8 模型，想追踪什么（人、小球、特定车辆）由你自己训练。
* **端侧极速推理**：利用 ncnn 框架在 Orange Pi Zero 3 上实现轻量化部署，榨干 ARM CPU 性能。
* **工业级底盘控制**：STM32F103C8T6 运行 FreeRTOS，结合双路编码器与 PID 闭环，实现精准的差速运动学调度。
---
## 硬件采购清单 (BOM)
如果你想从零复现本项目，需要准备以下核心硬件：

| 硬件分类 | 推荐型号/规格 | 作用说明 |
| :--- | :--- | :--- |
| **视觉大脑** | Orange Pi Zero 3 (香橙派) | 运行 Linux 系统与 NCNN 视觉推理算法 |
| **底盘小脑** | STM32F103C8T6 核心板 | 运行 FreeRTOS 实时控制电机与读取传感器 |
| **底盘结构** | 可参考项目内 PCB 扩展板 + 亚克力/金属车模 | 承载硬件与电路连接 |
| **执行机构** | 带有 AB 相霍尔编码器的直流减速电机 | 提供动力及速度反馈 |
| **视觉输入** | 普通 USB 摄像头 (免驱) | 采集环境图像 |
| **电源模块** | 12V 动力锂电池 + 5V 降压模块 (Buck) | 分别为电机和逻辑控制板供电 |
|   **其他**   | 电机买JGB32-520*2/*4，85mm实心轮胎 *2，bb响（用于航模电池检查），双面胶（实现MVP），type-c数据线，如果航模电池需要买T插公母头，TB6612电机驱动模块，LM2596S DC降压模块

---

## 硬件架构与供电接线 (Hardware & Wiring)

本项目的硬件供电逻辑经过专门设计，实现了大电流电机与精密逻辑主板的物理隔离供电，防止电压突变导致死机。

### 核心接线逻辑
1. **动力系统**：电池直接接入 PCB 底板，为 STM32 及电机驱动芯片提供原生大电流。
2. **逻辑降压**：电池通过红黑裸线接入降压模块，将电压降至稳定的 5V。
3. **视觉供电**：降压模块通过 Type-C 线连接 Orange Pi Zero 3，为其独立供电。
4. **通信连线**：Orange Pi 的 TX/RX 通过杜邦线连接至 PCB 对应的 RX/TX（波特率 `115200`）。

> **注：** 电机、编码器的具体连线以及 STM32 的详细引脚分配，请直接参考仓库中的 `PCB原理图` 与 `firmware/*.ioc` 工程配置文件。

---

## 软件架构与部署 (Software Architecture)

### 1. Windows PC 端：模型训练与转换
本项目不局限于特定目标，你可以自由训练模型：
1. 在 Windows 电脑上使用 PyTorch 训练自己的 YOLOv8 模型，导出 `.onnx`。
2. 使用 `onnx2ncnn` 工具，将模型转换为适用于端侧的 `.param`（网络结构）和 `.bin`（权重数据）文件。
3. 将生成的文件拷贝至香橙派的 `vision/model/` 目录下即可。

### 2. Orange Pi 端：视觉推理 (`vision/`)
负责捕捉图像并计算偏差下发指令。
```bash
# 1. 克隆项目 (直接在香橙派终端运行)
git clone [https://github.com/yizhizhu222/](https://github.com/yizhizhu222/)[你的仓库名].git
cd [你的仓库名]/vision

# 2. 编译视觉程序
mkdir build && cd build
cmake ..
make -j4

# 3. 运行追踪程序
./robot_eye


